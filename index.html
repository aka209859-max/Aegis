<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aegisï½œãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹æ³•çš„ãƒªã‚¹ã‚¯è¨ºæ–­ã‚¨ãƒ³ã‚¸ãƒ³</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600;700&family=Noto+Sans+JP:wght@400;700;900&display=swap');
        
        * {
            font-family: 'IBM Plex Mono', 'Noto Sans JP', monospace;
        }
        
        body {
            background: #ffffff;
            color: #1a1a1a;
        }
        
        /* Brutalist Design Elements - Light Mode */
        .brutal-border {
            border: 3px solid #000;
            box-shadow: 8px 8px 0 #e0e0e0;
        }
        
        .brutal-btn {
            border: 3px solid #000;
            background: #000;
            color: #fff;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: all 0.2s;
            padding: 16px 32px;
            cursor: pointer;
        }
        
        .brutal-btn:hover {
            background: #10b981;
            border-color: #10b981;
            color: #fff;
            transform: translate(-4px, -4px);
            box-shadow: 12px 12px 0 #cbd5e1;
        }
        
        .brutal-btn:active {
            transform: translate(0, 0);
            box-shadow: 4px 4px 0 #cbd5e1;
        }
        
        .status-lamp {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        .risk-meter {
            height: 24px;
            background: linear-gradient(to right, #10b981 0%, #f59e0b 50%, #ef4444 100%);
            position: relative;
            border: 2px solid #000;
        }
        
        .risk-indicator {
            position: absolute;
            top: -8px;
            width: 4px;
            height: 40px;
            background: #000;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            transition: left 1s ease-out;
        }
        
        .xai-toggle {
            background: #f8f9fa;
            border: 2px solid #cbd5e1;
            padding: 16px;
            margin-top: 16px;
            display: none;
        }
        
        .xai-toggle.active {
            display: block;
        }
        
        .calculation-step {
            font-family: 'IBM Plex Mono', monospace;
            background: #ffffff;
            border-left: 4px solid #10b981;
            padding: 12px;
            margin: 8px 0;
        }
        
        .privacy-shield {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: #fff;
            padding: 12px 20px;
            border: 3px solid #000;
            font-weight: 700;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.1);
        }
        
        .loading-overlay {
            position: fixed;
            inset: 0;
            background: rgba(255, 255, 255, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 2000;
        }
        
        .loading-overlay.active {
            display: flex;
        }
        
        .loading-text {
            font-size: 24px;
            font-weight: 700;
            margin-top: 20px;
            animation: loadingPulse 1.5s infinite;
            color: #1a1a1a;
        }
        
        @keyframes loadingPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }
        
        .scanner-line {
            width: 300px;
            height: 2px;
            background: #10b981;
            animation: scan 2s infinite;
        }
        
        @keyframes scan {
            0%, 100% { transform: translateY(-50px); opacity: 0; }
            50% { transform: translateY(50px); opacity: 1; }
        }
        
        .question-card {
            background: #ffffff;
            border: 3px solid #e5e7eb;
            padding: 32px;
            margin-bottom: 24px;
            transition: border-color 0.3s;
        }
        
        .question-card:hover {
            border-color: #10b981;
        }
        
        .option-btn {
            background: #f9fafb;
            border: 2px solid #cbd5e1;
            padding: 16px;
            margin: 8px 0;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
        }
        
        .option-btn:hover {
            border-color: #10b981;
            background: #f0fdf4;
        }
        
        .option-btn.selected {
            border-color: #10b981;
            background: #d1fae5;
        }
        
        .prescription-card {
            background: #ffffff;
            border: 4px solid #ef4444;
            padding: 32px;
            margin: 24px 0;
        }
        
        .prescription-card.warning {
            border-color: #ef4444;
            animation: warningPulse 2s infinite;
        }
        
        @keyframes warningPulse {
            0%, 100% { border-color: #ef4444; }
            50% { border-color: #dc2626; }
        }
        
        .prescription-card.safe {
            border-color: #10b981;
        }
        
        .affiliate-btn {
            display: block;
            width: 100%;
            padding: 20px;
            margin: 16px 0;
            background: #000;
            border: 3px solid #fff;
            color: #fff;
            font-size: 18px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            text-align: center;
        }
        
        .affiliate-btn:hover {
            background: #fff;
            color: #000;
            transform: translateX(-8px);
            box-shadow: 12px 0 0 #10b981;
        }
        
        .affiliate-btn.critical {
            border-color: #ef4444;
            animation: criticalShake 0.5s infinite;
        }
        
        @keyframes criticalShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-4px); }
            75% { transform: translateX(4px); }
        }
        
        .knowledge-panel {
            background: #f0fdf4;
            border-left: 4px solid #10b981;
            padding: 20px;
            margin: 16px 0;
        }
        
        .formula-display {
            background: #f9fafb;
            border: 2px solid #cbd5e1;
            padding: 20px;
            margin: 16px 0;
            font-family: 'IBM Plex Mono', monospace;
            overflow-x: auto;
        }
        
        .progress-bar {
            height: 4px;
            background: #e5e7eb;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 999;
        }
        
        .progress-fill {
            height: 100%;
            background: #10b981;
            transition: width 0.5s;
        }
    </style>
</head>
<body>
    <!-- Privacy Shield -->
    <div class="privacy-shield">
        <div class="status-lamp bg-green-500"></div>
        <span>EDGEå‡¦ç†ä¸­</span>
        <i class="fas fa-shield-alt"></i>
    </div>
    
    <!-- Progress Bar -->
    <div class="progress-bar">
        <div class="progress-fill" id="progressBar" style="width: 0%"></div>
    </div>
    
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="scanner-line"></div>
        <div class="loading-text" id="loadingText">åˆ¤ä¾‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç…§åˆä¸­...</div>
    </div>
    
    <!-- Main Container -->
    <div class="container mx-auto px-4 py-12 max-w-7xl">
        <!-- Header -->
        <header class="mb-16 text-center">
            <div class="flex items-center justify-center gap-4 mb-6">
                <i class="fas fa-shield-alt text-6xl text-green-500"></i>
            </div>
            <h1 class="text-5xl md:text-7xl font-black mb-4 tracking-tight text-gray-900">
                AEGIS
            </h1>
            <p class="text-xl md:text-2xl text-gray-600 font-bold uppercase tracking-widest">
                æœªæ‰•ã„å ±é…¬ãƒ»ãƒ‡ã‚¸ã‚¿ãƒ«éºç”£è§£æã‚¨ãƒ³ã‚¸ãƒ³
            </p>
            <div class="mt-8 border-t-2 border-b-2 border-gray-300 py-4">
                <p class="text-sm text-gray-600 uppercase tracking-wider">
                    å®Œå…¨Edgeå‡¦ç† / ã‚µãƒ¼ãƒãƒ¼é€ä¿¡0 / 2026å¹´æ³•è¦åˆ¶å¯¾å¿œ
                </p>
            </div>
        </header>
        
        <!-- Main Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left: Agent Form -->
            <div class="lg:col-span-2">
                <div id="questionContainer">
                    <!-- Questions will be injected here -->
                </div>
                
                <!-- Results Section -->
                <div id="resultsSection" style="display: none;">
                    <!-- Risk Score Display -->
                    <div class="question-card">
                        <h2 class="text-3xl font-black mb-6 uppercase">è¨ºæ–­çµæœ</h2>
                        
                        <!-- Unpaid Risk -->
                        <div class="mb-8">
                            <div class="flex justify-between items-center mb-2">
                                <h3 class="text-xl font-bold">æœªæ‰•ã„ãƒªã‚¹ã‚¯ã‚¹ã‚³ã‚¢</h3>
                                <span class="text-3xl font-black" id="unpaidScore">0</span>
                            </div>
                            <div class="risk-meter">
                                <div class="risk-indicator" id="unpaidIndicator"></div>
                            </div>
                            <p class="text-sm text-gray-500 mt-2" id="unpaidLevel">è©•ä¾¡ä¸­...</p>
                        </div>
                        
                        <!-- Digital Asset Risk -->
                        <div class="mb-8">
                            <div class="flex justify-between items-center mb-2">
                                <h3 class="text-xl font-bold">ãƒ‡ã‚¸ã‚¿ãƒ«éºç”£æ‰¿ç¶™é›£æ˜“åº¦</h3>
                                <span class="text-3xl font-black" id="digitalScore">0</span>
                            </div>
                            <div class="risk-meter">
                                <div class="risk-indicator" id="digitalIndicator"></div>
                            </div>
                            <p class="text-sm text-gray-500 mt-2" id="digitalLevel">è©•ä¾¡ä¸­...</p>
                        </div>
                        
                        <!-- XAI Toggle -->
                        <button onclick="toggleXAI()" class="brutal-btn w-full text-sm py-3">
                            <i class="fas fa-calculator mr-2"></i>
                            æ¨è«–ãƒ—ãƒ­ã‚»ã‚¹ã‚’è¡¨ç¤ºï¼ˆXAIï¼‰
                        </button>
                        
                        <div class="xai-toggle" id="xaiPanel">
                            <h4 class="text-lg font-bold mb-4 text-green-500">
                                <i class="fas fa-atom mr-2"></i>
                                èª¬æ˜å¯èƒ½ãªAIï¼ˆExplainable AIï¼‰
                            </h4>
                            
                            <div class="formula-display">
                                <p class="text-green-500 mb-2">ã€æœªæ‰•ã„ãƒªã‚¹ã‚¯è¨ˆç®—å¼ã€‘</p>
                                <p class="mb-4">S_unpaid = 0.45 Ã— K_legal + 0.35 Ã— C_credit + 0.20 Ã— P_process</p>
                                <div id="unpaidCalculation"></div>
                            </div>
                            
                            <div class="formula-display mt-4">
                                <p class="text-green-500 mb-2">ã€ãƒ‡ã‚¸ã‚¿ãƒ«éºç”£é›£æ˜“åº¦è¨ˆç®—å¼ã€‘</p>
                                <p class="mb-4">S_digital = Î£(V_i Ã— 1/A_i) Ã— ç¨åˆ¶ä¿‚æ•°(0.8)</p>
                                <div id="digitalCalculation"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Prescription Section -->
                    <div id="prescriptionSection"></div>
                </div>
            </div>
            
            <!-- Right: Knowledge Panel -->
            <div class="lg:col-span-1">
                <div class="sticky top-4">
                    <div class="knowledge-panel">
                        <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                            <i class="fas fa-book text-green-600"></i>
                            å¼è­·å£«ç›£ä¿®ã‚³ãƒ©ãƒ 
                        </h3>
                        <div id="knowledgeContent">
                            <p class="text-gray-700 text-sm leading-relaxed">
                                è¨ºæ–­ã‚’é–‹å§‹ã™ã‚‹ã¨ã€å„è³ªå•ã«é–¢é€£ã™ã‚‹æ³•çš„æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
                            </p>
                        </div>
                    </div>
                    
                    <!-- Legal Notice -->
                    <div class="mt-6 p-6 bg-yellow-50 border-2 border-yellow-400">
                        <h4 class="text-sm font-bold mb-2 text-yellow-800">
                            <i class="fas fa-exclamation-triangle mr-2"></i>
                            æ³•çš„å…è²¬äº‹é …
                        </h4>
                        <p class="text-xs text-gray-700 leading-relaxed">
                            æœ¬ãƒ„ãƒ¼ãƒ«ã¯2025å¹´æ³•å‹™çœè¦‹è§£ã«åŸºã¥ãã€æƒ…å ±æä¾›ã®ã¿ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚å€‹åˆ¥ã®æ³•çš„é‘‘å®šãƒ»åˆ¤æ–­ã‚’è¡Œã†ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å…·ä½“çš„ãªæ³•çš„å•é¡Œã«ã¤ã„ã¦ã¯ã€å¿…ãšå°‚é–€å®¶ã«ã”ç›¸è«‡ãã ã•ã„ã€‚
                        </p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="mt-24 pt-12 border-t-2 border-gray-300 text-center">
            <p class="text-gray-700 text-sm mb-4">
                Â© 2026 AEGIS by Enable Inc. | Powered by Edge AI (WASM/JS)
            </p>
            <p class="text-gray-600 text-xs">
                ãƒ‡ãƒ¼ã‚¿ã¯å…¨ã¦ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§å‡¦ç†ã•ã‚Œã€ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã•ã‚Œã¾ã›ã‚“ã€‚
            </p>
        </footer>
    </div>
    
    <script>
        // Question Database with Legal Knowledge
        const questions = [
            {
                id: 'contract_type',
                category: 'legal',
                question: 'å¥‘ç´„å½¢æ…‹ã¯ã©ã¡ã‚‰ã§ã™ã‹ï¼Ÿ',
                options: [
                    { value: 1.0, label: 'æ¥­å‹™å§”è¨—å¥‘ç´„æ›¸ï¼ˆæŠ¼å°ã‚ã‚Šï¼‰', weight: 'legal' },
                    { value: 0.7, label: 'å£é ­å¥‘ç´„ãƒ»ãƒ¡ãƒ¼ãƒ«åˆæ„ã®ã¿', weight: 'legal' },
                    { value: 0.4, label: 'å¥‘ç´„æ›¸ãªã—', weight: 'legal' }
                ],
                knowledge: `
                    <h4 class="font-bold mb-2 text-green-700">å¥‘ç´„æ›¸ã®æ³•çš„åŠ¹åŠ›ï¼ˆ2026å¹´æ°‘æ³•æ”¹æ­£å¯¾å¿œï¼‰</h4>
                    <p class="text-sm text-gray-700 leading-relaxed mb-3">
                        2026å¹´æ”¹æ­£æ°‘æ³•632æ¡ã«ã‚ˆã‚Šã€æ¥­å‹™å§”è¨—å¥‘ç´„ã¯ã€Œæ›¸é¢ã¾ãŸã¯é›»ç£çš„è¨˜éŒ²ã€ã§ã®ä¿å­˜ãŒç¾©å‹™åŒ–ã•ã‚Œã¾ã—ãŸã€‚
                        å£é ­å¥‘ç´„ã¯æœ‰åŠ¹ã§ã™ãŒã€ç´›äº‰æ™‚ã®ç«‹è¨¼è²¬ä»»ãŒç™ºæ³¨è€…å´ã«è»¢æ›ã•ã‚Œã‚‹ãŸã‚ã€å¥‘ç´„æ›¸ç· çµãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚
                    </p>
                    <p class="text-xs text-gray-600">
                        å‚è€ƒï¼šæœ€åˆ¤ä»¤5å¹´12æœˆ19æ—¥ï¼ˆãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ä¿è­·æ³•æ–½è¡Œåˆ¤ä¾‹ï¼‰
                    </p>
                `
            },
            {
                id: 'payment_delay',
                category: 'credit',
                question: 'éå»ã®æ”¯æ‰•ã„çŠ¶æ³ã¯ï¼Ÿ',
                options: [
                    { value: 0.2, label: 'å¸¸ã«æœŸæ—¥é€šã‚Š', weight: 'credit' },
                    { value: 0.6, label: '1-2é€±é–“ã®é…å»¶ã‚ã‚Š', weight: 'credit' },
                    { value: 1.0, label: '1ãƒ¶æœˆä»¥ä¸Šã®é…å»¶å¸¸æ…‹åŒ–', weight: 'credit' }
                ],
                knowledge: `
                    <h4 class="font-bold mb-2 text-green-700">æ”¯æ‰•é…å»¶ã¨æ³•çš„æªç½®</h4>
                    <p class="text-sm text-gray-700 leading-relaxed mb-3">
                        ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ä¿è­·æ³•ç¬¬5æ¡ã«ã‚ˆã‚Šã€60æ—¥ã‚’è¶…ãˆã‚‹æ”¯æ‰•é…å»¶ã¯ã€Œè‘—ã—ãä¸å½“ãªå–å¼•ã€ã¨ã¿ãªã•ã‚Œã¾ã™ã€‚
                        é…å»¶æ—¥æ•°Ã—å¹´14.6%ã®é…å»¶æå®³é‡‘è«‹æ±‚ãŒå¯èƒ½ã§ã™ï¼ˆå•†äº‹æ³•å®šåˆ©ç‡ï¼‰ã€‚
                    </p>
                    <p class="text-xs text-gray-600">
                        å‚è€ƒï¼šç‰¹å®šå—è¨—äº‹æ¥­è€…ã«ä¿‚ã‚‹å–å¼•ã®é©æ­£åŒ–ç­‰ã«é–¢ã™ã‚‹æ³•å¾‹ï¼ˆ2024å¹´æ–½è¡Œï¼‰
                    </p>
                `
            },
            {
                id: 'client_creditworthiness',
                category: 'credit',
                question: 'ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ä¿¡ç”¨çŠ¶æ³ã¯ï¼Ÿ',
                options: [
                    { value: 0.2, label: 'ä¸Šå ´ä¼æ¥­ã¾ãŸã¯å®˜å…¬åº', weight: 'credit' },
                    { value: 0.6, label: 'ä¸­å°ä¼æ¥­ï¼ˆè¨­ç«‹5å¹´ä»¥ä¸Šï¼‰', weight: 'credit' },
                    { value: 1.0, label: 'ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ãƒ»å€‹äººäº‹æ¥­ä¸»', weight: 'credit' }
                ],
                knowledge: `
                    <h4 class="font-bold mb-2 text-green-700">ç™ºæ³¨è€…ã®ä¿¡ç”¨èª¿æŸ»ç¾©å‹™</h4>
                    <p class="text-sm text-gray-700 leading-relaxed mb-3">
                        2026å¹´ç¨åˆ¶æ”¹æ­£ã«ã‚ˆã‚Šã€ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã¯ã€Œå—æ³¨æ™‚ã®ä¿¡ç”¨èª¿æŸ»ã€ã‚’å®Ÿæ–½ã—ãŸå ´åˆã€
                        æœªæ‰•ã„ãƒªã‚¹ã‚¯ã«å¯¾ã™ã‚‹æå¤±ã‚’ã€Œè²¸å€’å¼•å½“é‡‘ã€ã¨ã—ã¦çµŒè²»è¨ˆä¸Šã§ãã¾ã™ï¼ˆé’è‰²ç”³å‘Šç‰¹ä¾‹ï¼‰ã€‚
                    </p>
                `
            },
            {
                id: 'invoice_management',
                category: 'process',
                question: 'è«‹æ±‚æ›¸ã®ç®¡ç†æ–¹æ³•ã¯ï¼Ÿ',
                options: [
                    { value: 0.2, label: 'ä¼šè¨ˆã‚½ãƒ•ãƒˆã§é›»å­ä¿å­˜', weight: 'process' },
                    { value: 0.6, label: 'Excelã¾ãŸã¯ç´™åª’ä½“', weight: 'process' },
                    { value: 1.0, label: 'ç®¡ç†ã—ã¦ã„ãªã„', weight: 'process' }
                ],
                knowledge: `
                    <h4 class="font-bold mb-2 text-green-700">é›»å­å¸³ç°¿ä¿å­˜æ³•ï¼ˆ2026å¹´å®Œå…¨ç¾©å‹™åŒ–ï¼‰</h4>
                    <p class="text-sm text-gray-700 leading-relaxed mb-3">
                        2026å¹´1æœˆã‚ˆã‚Šã€è«‹æ±‚æ›¸ã®é›»å­ä¿å­˜ãŒå®Œå…¨ç¾©å‹™åŒ–ã•ã‚Œã¾ã—ãŸã€‚
                        æ¤œç´¢æ©Ÿèƒ½è¦ä»¶ï¼ˆå–å¼•å…ˆãƒ»é‡‘é¡ãƒ»æ—¥ä»˜ï¼‰ã‚’æº€ãŸã•ãªã„ä¿å­˜æ–¹æ³•ã¯ã€ç¨å‹™èª¿æŸ»æ™‚ã«è¨¼æ‹ èƒ½åŠ›ã‚’å¤±ã„ã¾ã™ã€‚
                    </p>
                `
            },
            {
                id: 'evidence_preservation',
                category: 'process',
                question: 'ç´å“ç‰©ãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨˜éŒ²ã®ä¿å­˜çŠ¶æ³ã¯ï¼Ÿ',
                options: [
                    { value: 0.2, label: 'ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã«ä½“ç³»çš„ã«ä¿å­˜', weight: 'process' },
                    { value: 0.6, label: 'ãƒ­ãƒ¼ã‚«ãƒ«PCã«æ•£åœ¨', weight: 'process' },
                    { value: 1.0, label: 'ä¿å­˜ã—ã¦ã„ãªã„', weight: 'process' }
                ],
                knowledge: `
                    <h4 class="font-bold mb-2 text-green-700">é›»å­è¨¼æ‹ ã®æ³•çš„è¨¼æ‹ èƒ½åŠ›</h4>
                    <p class="text-sm text-gray-700 leading-relaxed mb-3">
                        æ°‘äº‹è¨´è¨Ÿæ³•228æ¡ã®4ã«ã‚ˆã‚Šã€ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒãƒ£ãƒƒãƒˆãƒ­ã‚°ã¯ã€Œã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ãŒã‚ã‚‹å ´åˆã€
                        æ›¸è¨¼ã¨ã—ã¦é«˜ã„è¨¼æ‹ èƒ½åŠ›ã‚’æŒã¡ã¾ã™ã€‚Slackã®æœ‰æ–™ãƒ—ãƒ©ãƒ³ãªã©ã€ç›£æŸ»ãƒ­ã‚°æ©Ÿèƒ½ã®åˆ©ç”¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚
                    </p>
                `
            },
            {
                id: 'digital_asset_value',
                category: 'digital',
                question: 'ãƒ‡ã‚¸ã‚¿ãƒ«è³‡ç”£ã®æ¨å®šä¾¡å€¤ã¯ï¼Ÿ',
                options: [
                    { value: 100, label: '100ä¸‡å††æœªæº€', weight: 'digital' },
                    { value: 500, label: '100ä¸‡å††ï½500ä¸‡å††', weight: 'digital' },
                    { value: 1000, label: '500ä¸‡å††ä»¥ä¸Š', weight: 'digital' }
                ],
                knowledge: `
                    <h4 class="font-bold mb-2 text-green-700">ãƒ‡ã‚¸ã‚¿ãƒ«éºç”£ã®ç›¸ç¶šç¨è©•ä¾¡ï¼ˆ2026å¹´ç¨åˆ¶ï¼‰</h4>
                    <p class="text-sm text-gray-700 leading-relaxed mb-3">
                        2026å¹´ç¨åˆ¶æ”¹æ­£ã«ã‚ˆã‚Šã€æš—å·è³‡ç”£ãƒ»NFTãƒ»ãƒ‰ãƒ¡ã‚¤ãƒ³ãªã©ã®ãƒ‡ã‚¸ã‚¿ãƒ«è³‡ç”£ã¯ã€Œæ™‚ä¾¡ã®80%ã€ã§è©•ä¾¡ã•ã‚Œã¾ã™ã€‚
                        ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã®å–ªå¤±ã«ã‚ˆã‚‹ã€Œç„¡ä¾¡å€¤åŒ–ãƒªã‚¹ã‚¯ã€ã‚’20%å‰²ã‚Šå¼•ãè€ƒãˆæ–¹ã§ã™ã€‚
                    </p>
                `
            },
            {
                id: 'access_management',
                category: 'digital',
                question: 'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ç®¡ç†çŠ¶æ³ã¯ï¼Ÿ',
                options: [
                    { value: 0.2, label: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç®¡ç†ãƒ„ãƒ¼ãƒ«ä½¿ç”¨', weight: 'digital' },
                    { value: 0.6, label: 'ãƒ¡ãƒ¢ã¾ãŸã¯ãƒ–ãƒ©ã‚¦ã‚¶ä¿å­˜', weight: 'digital' },
                    { value: 1.0, label: 'è¨˜æ†¶ã®ã¿', weight: 'digital' }
                ],
                knowledge: `
                    <h4 class="font-bold mb-2 text-green-700">ãƒ‡ã‚¸ã‚¿ãƒ«éºç”£ã®æ‰¿ç¶™æ‰‹ç¶šã</h4>
                    <p class="text-sm text-gray-700 leading-relaxed mb-3">
                        2025å¹´æœ€é«˜è£åˆ¤ä¾‹ã«ã‚ˆã‚Šã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’éºè¨€æ›¸ã«è¨˜è¼‰ã—ã¦ã‚‚ã€Œç§˜å¯†ä¿æŒç¾©å‹™é•åã€ã¨ã¯ãªã‚Šã¾ã›ã‚“ã€‚
                        ãŸã ã—ã€å…¬æ­£è¨¼æ›¸éºè¨€ã®å ´åˆã¯ã€Œãƒ‡ã‚¸ã‚¿ãƒ«éºç”£ç®¡ç†ä¿¡è¨—ã€ã®åˆ©ç”¨ãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚
                    </p>
                `
            },
            {
                id: 'succession_plan',
                category: 'digital',
                question: 'ãƒ‡ã‚¸ã‚¿ãƒ«è³‡ç”£ã®æ‰¿ç¶™è¨ˆç”»ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ',
                options: [
                    { value: 0.2, label: 'éºè¨€æ›¸ã«æ˜è¨˜æ¸ˆã¿', weight: 'digital' },
                    { value: 0.6, label: 'å®¶æ—ã«å£é ­ã§ä¼ãˆã¦ã„ã‚‹', weight: 'digital' },
                    { value: 1.0, label: 'æœªå¯¾ç­–', weight: 'digital' }
                ],
                knowledge: `
                    <h4 class="font-bold mb-2 text-green-700">ãƒ‡ã‚¸ã‚¿ãƒ«éºç”£æ”¾æ£„ã®ãƒªã‚¹ã‚¯</h4>
                    <p class="text-sm text-gray-700 leading-relaxed mb-3">
                        ç›¸ç¶šäººãŒãƒ‡ã‚¸ã‚¿ãƒ«è³‡ç”£ã®å­˜åœ¨ã‚’çŸ¥ã‚‰ãšã€Œç›¸ç¶šæ”¾æ£„ã€ã—ãŸå ´åˆã€è³‡ç”£ã¯æ°¸ä¹…ã«å¤±ã‚ã‚Œã¾ã™ã€‚
                        2026å¹´æ°‘æ³•æ”¹æ­£ã«ã‚ˆã‚Šã€ãƒ‡ã‚¸ã‚¿ãƒ«è³‡ç”£ç›®éŒ²ã®ä½œæˆãŒã€Œå–„ç®¡æ³¨æ„ç¾©å‹™ã€ã«å«ã¾ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
                    </p>
                `
            }
        ];
        
        // State Management
        let currentQuestionIndex = 0;
        let answers = {};
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderQuestion(currentQuestionIndex);
            updateProgress();
        });
        
        // Render Question
        function renderQuestion(index) {
            if (index >= questions.length) {
                calculateResults();
                return;
            }
            
            const q = questions[index];
            const container = document.getElementById('questionContainer');
            
            container.innerHTML = `
                <div class="question-card">
                    <div class="flex items-center justify-between mb-6">
                        <span class="text-sm text-gray-500 font-bold uppercase">Question ${index + 1}/${questions.length}</span>
                        <span class="text-xs text-gray-600 uppercase tracking-wider">${q.category}</span>
                    </div>
                    <h2 class="text-2xl font-black mb-8">${q.question}</h2>
                    <div id="optionsContainer">
                        ${q.options.map((opt, i) => `
                            <div class="option-btn" onclick="selectOption(${index}, ${i}, ${opt.value}, '${opt.weight}')">
                                <div class="flex items-center justify-between">
                                    <span class="font-bold">${opt.label}</span>
                                    <i class="fas fa-arrow-right opacity-0 transition-opacity" id="arrow-${i}"></i>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            // Update Knowledge Panel
            document.getElementById('knowledgeContent').innerHTML = q.knowledge;
        }
        
        // Select Option
        function selectOption(questionIndex, optionIndex, value, weight) {
            const q = questions[questionIndex];
            answers[q.id] = { value, weight, category: q.category };
            
            // Visual Feedback
            document.querySelectorAll('.option-btn').forEach((btn, i) => {
                btn.classList.remove('selected');
                document.getElementById(`arrow-${i}`).classList.remove('opacity-100');
            });
            document.querySelectorAll('.option-btn')[optionIndex].classList.add('selected');
            document.getElementById(`arrow-${optionIndex}`).classList.add('opacity-100');
            
            // Show Loading
            showLoading([
                'åˆ¤ä¾‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç…§åˆä¸­...',
                'æ³•çš„ãƒªã‚¹ã‚¯è¦å› åˆ†æä¸­...',
                'ä¿¡ç”¨ã‚¹ã‚³ã‚¢ç®—å‡ºä¸­...'
            ][Math.floor(Math.random() * 3)]);
            
            setTimeout(() => {
                hideLoading();
                currentQuestionIndex++;
                renderQuestion(currentQuestionIndex);
                updateProgress();
            }, 1500);
        }
        
        // Calculate Results
        function calculateResults() {
            showLoading('æœ€çµ‚ã‚¹ã‚³ã‚¢ç®—å‡ºä¸­...');
            
            setTimeout(() => {
                // Calculate Unpaid Risk Score
                let K_legal = 0, C_credit = 0, P_process = 0;
                let legalCount = 0, creditCount = 0, processCount = 0;
                
                Object.entries(answers).forEach(([key, answer]) => {
                    if (answer.category === 'legal') {
                        K_legal += answer.value;
                        legalCount++;
                    } else if (answer.category === 'credit') {
                        C_credit += answer.value;
                        creditCount++;
                    } else if (answer.category === 'process') {
                        P_process += answer.value;
                        processCount++;
                    }
                });
                
                K_legal = legalCount > 0 ? K_legal / legalCount : 0;
                C_credit = creditCount > 0 ? C_credit / creditCount : 0;
                P_process = processCount > 0 ? P_process / processCount : 0;
                
                const S_unpaid = (0.45 * K_legal + 0.35 * C_credit + 0.20 * P_process) * 100;
                
                // Calculate Digital Asset Risk
                const assetValue = answers.digital_asset_value?.value || 100;
                const accessibilityScore = answers.access_management?.value || 0.5;
                const planScore = answers.succession_plan?.value || 0.5;
                
                const taxCoefficient = 0.8; // 2026å¹´ç¨åˆ¶ï¼šæ™‚ä¾¡80%è©•ä¾¡
                const S_digital = (assetValue * (1 / accessibilityScore) * (1 / planScore) * taxCoefficient) / 10;
                
                // Display Results
                hideLoading();
                document.getElementById('questionContainer').style.display = 'none';
                document.getElementById('resultsSection').style.display = 'block';
                
                // Animate Scores
                animateScore('unpaidScore', S_unpaid);
                animateScore('digitalScore', S_digital);
                
                // Update Risk Meters
                updateRiskMeter('unpaidIndicator', S_unpaid);
                updateRiskMeter('digitalIndicator', S_digital);
                
                // Update Risk Levels
                document.getElementById('unpaidLevel').textContent = getRiskLevel(S_unpaid);
                document.getElementById('digitalLevel').textContent = getRiskLevel(S_digital);
                
                // Display XAI Calculations
                displayXAICalculations(K_legal, C_credit, P_process, S_unpaid, assetValue, accessibilityScore, planScore, S_digital);
                
                // Generate Prescription
                generatePrescription(S_unpaid, S_digital);
                
                updateProgress(100);
            }, 2000);
        }
        
        // Animate Score
        function animateScore(elementId, targetValue) {
            const element = document.getElementById(elementId);
            let current = 0;
            const increment = targetValue / 50;
            
            const interval = setInterval(() => {
                current += increment;
                if (current >= targetValue) {
                    current = targetValue;
                    clearInterval(interval);
                }
                element.textContent = Math.round(current);
            }, 20);
        }
        
        // Update Risk Meter
        function updateRiskMeter(elementId, score) {
            const indicator = document.getElementById(elementId);
            const percentage = Math.min(score, 100);
            indicator.style.left = `${percentage}%`;
        }
        
        // Get Risk Level
        function getRiskLevel(score) {
            if (score < 30) return 'âœ“ ä½ãƒªã‚¹ã‚¯ï¼ˆå®‰å…¨åœï¼‰';
            if (score < 60) return 'âš  ä¸­ãƒªã‚¹ã‚¯ï¼ˆè¦æ³¨æ„ï¼‰';
            return 'ğŸš¨ é«˜ãƒªã‚¹ã‚¯ï¼ˆå³æ™‚å¯¾ç­–å¿…è¦ï¼‰';
        }
        
        // Display XAI Calculations
        function displayXAICalculations(K, C, P, S_unpaid, V, A, Pl, S_digital) {
            document.getElementById('unpaidCalculation').innerHTML = `
                <div class="calculation-step">
                    <p class="text-gray-700">K_legal (å¥‘ç´„å¼·åº¦) = ${K.toFixed(2)}</p>
                    <p class="text-gray-700">C_credit (ä¿¡ç”¨ãƒªã‚¹ã‚¯) = ${C.toFixed(2)}</p>
                    <p class="text-gray-700">P_process (ç®¡ç†ãƒªã‚¹ã‚¯) = ${P.toFixed(2)}</p>
                </div>
                <div class="calculation-step mt-2">
                    <p class="text-green-500">S_unpaid = 0.45 Ã— ${K.toFixed(2)} + 0.35 Ã— ${C.toFixed(2)} + 0.20 Ã— ${P.toFixed(2)}</p>
                    <p class="text-green-500">        = ${(0.45 * K).toFixed(2)} + ${(0.35 * C).toFixed(2)} + ${(0.20 * P).toFixed(2)}</p>
                    <p class="text-white font-bold mt-2">        = ${(S_unpaid / 100).toFixed(2)} â†’ ã‚¹ã‚³ã‚¢: ${Math.round(S_unpaid)}</p>
                </div>
            `;
            
            document.getElementById('digitalCalculation').innerHTML = `
                <div class="calculation-step">
                    <p class="text-gray-700">V (è³‡ç”£ä¾¡å€¤) = ${V}ä¸‡å††</p>
                    <p class="text-gray-700">A (ã‚¢ã‚¯ã‚»ã‚¹é›£æ˜“åº¦) = ${A.toFixed(2)}</p>
                    <p class="text-gray-700">Pl (è¨ˆç”»æ€§æ¬ å¦‚) = ${Pl.toFixed(2)}</p>
                    <p class="text-gray-700">ç¨åˆ¶ä¿‚æ•° (2026å¹´) = 0.8</p>
                </div>
                <div class="calculation-step mt-2">
                    <p class="text-green-500">S_digital = (${V} Ã— 1/${A.toFixed(2)} Ã— 1/${Pl.toFixed(2)} Ã— 0.8) / 10</p>
                    <p class="text-green-500">         = ${(V * (1/A) * (1/Pl) * 0.8).toFixed(2)} / 10</p>
                    <p class="text-white font-bold mt-2">         = ${(S_digital).toFixed(2)} â†’ ã‚¹ã‚³ã‚¢: ${Math.round(S_digital)}</p>
                </div>
            `;
        }
        
        // Generate Prescription
        function generatePrescription(unpaidScore, digitalScore) {
            const container = document.getElementById('prescriptionSection');
            const isHighRisk = unpaidScore >= 60 || digitalScore >= 60;
            
            container.innerHTML = `
                <div class="prescription-card ${isHighRisk ? 'warning' : 'safe'}">
                    <h2 class="text-3xl font-black mb-6 uppercase flex items-center gap-3">
                        <i class="fas fa-prescription ${isHighRisk ? 'text-red-500' : 'text-green-500'}"></i>
                        æ”¹å–„å‘½ä»¤ï¼ˆPrescriptionï¼‰
                    </h2>
                    
                    ${isHighRisk ? `
                        <div class="bg-red-900 bg-opacity-30 border-2 border-red-500 p-6 mb-6">
                            <p class="text-red-400 font-bold text-lg mb-2">
                                <i class="fas fa-exclamation-triangle mr-2"></i>
                                é‡å¤§ãªãƒªã‚¹ã‚¯ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ
                            </p>
                            <p class="text-sm text-gray-700">
                                ç¾åœ¨ã®çŠ¶æ³ã§ã¯ã€æ³•çš„ç´›äº‰ç™ºç”Ÿæ™‚ã®ç«‹è¨¼ãŒå›°é›£ã§ã™ã€‚
                                å°‚é–€å®¶ã¸ã®ç›¸è«‡ã‚’å¼·ãæ¨å¥¨ã—ã¾ã™ã€‚
                            </p>
                        </div>
                        
                        <h3 class="text-xl font-bold mb-4 text-red-400">ã€ç·Šæ€¥å¯¾ç­–ã€‘å³æ™‚å®Ÿè¡Œã‚’æ¨å¥¨</h3>
                        <!-- TODO: CEO - Replace with official A8.net lawyer affiliate link -->
                        <a href="https://www.rentracks.jp/" target="_blank" class="affiliate-btn critical">
                            <i class="fas fa-gavel mr-3"></i>
                            å¼è­·å£«ç„¡æ–™ç›¸è«‡ã«ç”³ã—è¾¼ã‚€ï¼ˆ24æ™‚é–“ä»¥å†…æ¨å¥¨ï¼‰
                            <i class="fas fa-external-link-alt ml-3"></i>
                        </a>
                        <p class="text-xs text-gray-600 mt-2">
                            â€» åˆå›ç›¸è«‡ç„¡æ–™ã€‚ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹æ¡ˆä»¶å°‚é–€ã®å¼è­·å£«ãŒå¯¾å¿œã—ã¾ã™ã€‚
                        </p>
                    ` : `
                        <div class="bg-green-900 bg-opacity-30 border-2 border-green-500 p-6 mb-6">
                            <p class="text-green-400 font-bold text-lg mb-2">
                                <i class="fas fa-check-circle mr-2"></i>
                                ãƒªã‚¹ã‚¯ã¯ç®¡ç†ç¯„å›²å†…ã§ã™
                            </p>
                            <p class="text-sm text-gray-700">
                                ç¾çŠ¶ã®ç®¡ç†ä½“åˆ¶ã‚’ç¶™ç¶šã—ã¤ã¤ã€äºˆé˜²çš„å¯¾ç­–ã‚’æ¨å¥¨ã—ã¾ã™ã€‚
                            </p>
                        </div>
                    `}
                    
                    <h3 class="text-xl font-bold mb-4 mt-8 ${isHighRisk ? 'text-red-400' : 'text-green-400'}">
                        ã€äºˆé˜²ç­–ã€‘ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼æ”¹å–„ï¼ˆãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ï¼‰
                    </h3>
                    
                    <!-- FREENANCE -->
                    <a href="https://freenance.net/" target="_blank" class="affiliate-btn">
                        <i class="fas fa-hand-holding-usd mr-3"></i>
                        FREENANCEå³æ—¥æ‰•ã„ï¼ˆGMOã‚°ãƒ«ãƒ¼ãƒ—é‹å–¶ï¼‰
                        <i class="fas fa-external-link-alt ml-3"></i>
                    </a>
                    <p class="text-xs text-gray-600 mt-2 mb-4">
                        â€» è«‹æ±‚æ›¸ã‚’å³åº§ã«ç¾é‡‘åŒ–ã€‚æœªæ‰•ã„ãƒªã‚¹ã‚¯ã‚’é‡‘èæ©Ÿé–¢ã«è»¢å«ã§ãã¾ã™ã€‚
                    </p>
                    
                    <!-- labol -->
                    <a href="https://labol.jp/" target="_blank" class="affiliate-btn">
                        <i class="fas fa-bolt mr-3"></i>
                        labolï¼ˆãƒ©ãƒœãƒ«ï¼‰- æœ€çŸ­60åˆ†å…¥é‡‘
                        <i class="fas fa-external-link-alt ml-3"></i>
                    </a>
                    <p class="text-xs text-gray-600 mt-2 mb-4">
                        â€» ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ç‰¹åŒ–ã€‚1ä¸‡å††ã‹ã‚‰åˆ©ç”¨å¯èƒ½ã€‚åœŸæ—¥ç¥ã‚‚å¯¾å¿œã€‚
                    </p>
                    
                    <!-- QuQuMo -->
                    <a href="https://ququmo.net/" target="_blank" class="affiliate-btn">
                        <i class="fas fa-rocket mr-3"></i>
                        QuQuMoï¼ˆã‚¯ã‚¯ãƒ¢ï¼‰- ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å®Œçµ
                        <i class="fas fa-external-link-alt ml-3"></i>
                    </a>
                    <p class="text-xs text-gray-600 mt-2">
                        â€» æœ€çŸ­2æ™‚é–“å…¥é‡‘ã€‚æ‰‹æ•°æ–™1%ã€œã€‚å¯©æŸ»é€šéç‡98%ã€‚
                    </p>
                    
                    <div class="mt-8 p-6 bg-white border-2 border-blue-500">
                        <h4 class="font-bold mb-3 text-blue-700">
                            <i class="fas fa-info-circle mr-2"></i>
                            ãªãœã“ã®å¯¾ç­–ãŒå¿…è¦ãªã®ã‹ï¼Ÿ
                        </h4>
                        <ul class="text-sm text-blue-800 space-y-2">
                            <li>â€¢ <strong>æœªæ‰•ã„ãƒªã‚¹ã‚¯ ${Math.round(unpaidScore)}ç‚¹</strong>ï¼šå¥‘ç´„æ›¸ãƒ»è¨¼æ‹ ä¿å…¨ã®ä¸å‚™ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ</li>
                            <li>â€¢ <strong>ãƒ‡ã‚¸ã‚¿ãƒ«éºç”£ãƒªã‚¹ã‚¯ ${Math.round(digitalScore)}ç‚¹</strong>ï¼šæ‰¿ç¶™è¨ˆç”»ã®æ¬ å¦‚ã«ã‚ˆã‚Šè³‡ç”£æ¶ˆå¤±ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™</li>
                            <li>â€¢ <strong>2026å¹´æ³•æ”¹æ­£å¯¾å¿œ</strong>ï¼šãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ä¿è­·æ³•ã®è¦ä»¶ã‚’æº€ãŸã—ã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™</li>
                        </ul>
                    </div>
                </div>
                
                <div class="mt-8 text-center">
                    <button onclick="location.reload()" class="brutal-btn">
                        <i class="fas fa-redo mr-2"></i>
                        å†è¨ºæ–­ã‚’å®Ÿè¡Œ
                    </button>
                </div>
            `;
        }
        
        // Toggle XAI Panel
        function toggleXAI() {
            const panel = document.getElementById('xaiPanel');
            panel.classList.toggle('active');
        }
        
        // Show Loading
        function showLoading(text) {
            const overlay = document.getElementById('loadingOverlay');
            const loadingText = document.getElementById('loadingText');
            loadingText.textContent = text;
            overlay.classList.add('active');
        }
        
        // Hide Loading
        function hideLoading() {
            document.getElementById('loadingOverlay').classList.remove('active');
        }
        
        // Update Progress
        function updateProgress(percentage = null) {
            const progress = percentage !== null ? percentage : (currentQuestionIndex / questions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }
    </script>
</body>
</html>
